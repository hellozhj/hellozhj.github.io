<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="vue2-进阶, Evedward">
    <meta name="description" content="Vue2-进阶
一、Webpack（自动化 模块化 前端开发构建工具）
从本质上来说，webpack是一个静态模块打包工具。要想让我们写好的模块化代码在各式各样的浏览器上能做到兼容，就必须借助于其他工具；而webpack的其中一个核心就是让">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    

    <title>vue2-进阶 | Evedward</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.1.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Evedward" type="application/atom+xml">
</head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Evedward</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Evedward</div>
        <div class="logo-desc">
            
            关注嘉然，顿顿解馋
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/hellozhj" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/hellozhj" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/12.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">vue2-进阶</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/vue/">
                                <span class="chip bg-color">vue</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-07-16
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    13.5k
                </div>
                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="Vue2-进阶"><a href="#Vue2-进阶" class="headerlink" title="Vue2-进阶"></a>Vue2-进阶</h1><p><img src="/2022/07/16/vue2-jin-jie/vue2-%E8%BF%9B%E9%98%B6.png" alt="vue2-进阶"></p>
<h2 id="一、Webpack（自动化-模块化-前端开发构建工具）"><a href="#一、Webpack（自动化-模块化-前端开发构建工具）" class="headerlink" title="一、Webpack（自动化 模块化 前端开发构建工具）"></a>一、Webpack（自动化 模块化 前端开发构建工具）</h2><blockquote>
<p>从本质上来说，webpack是一个<strong>静态模块打包工具</strong>。<br>要想让我们写好的模块化代码在各式各样的浏览器上能做到兼容，就必须借助于其他工具；而webpack的其中一个核心就是让我们可&gt;以进行模块化开发，并帮我们处理模块间的依赖关系。不仅仅是Javascript文件，我们的css、图片、json文件等在webpack中都<br>可以当作模块来使用，这就是webpack的模块化概念。</p>
</blockquote>
<p>如果像以前开发时一个html文件可能会引用十几个js文件,而且顺序还不能乱，因为它们存在依赖关系，同时对于ES6+等新的语法，less, sass等CSS预处理都不能很好的解决……，此时就需要一个处理这些问题的工具。</p>
<p>Webpack就是为处理这些问题而生的，它就是把你的项目当成一个整体，通过一个入口主文件（如：index.js）,从这个文件开始找到你的项目所有的依赖文件并处理它们，最后打包成一个（或多个）浏览器可识别的JavaScript文件。</p>
<ol>
<li>有一个很大的单页应用，为了提高开发效率，要将这个项目拆成多个模块，开发完成后，这个项目可以正常跑了。但是因为多个模块是存在不同文件中的，因此加载这个单页应用时，会发出多次请求。这时我们希望能够把所有模块打包成一个文件，这样可以减少请求次数，提升体验。</li>
<li>在开发这个单页应用中，同样是为了提高开发效率，使用了一些js和css的扩展语言，如TypeScript及Less、stylus，这些扩展使我们可以更简洁优雅地写代码，但是开发完成开始部署时，需要将它们进行相应的转换，转换成浏览器支持的语言。这时，我们希望能够有个工具可以以很大的自动化程度去完成这个转换工作。</li>
<li>在这个单页应用开发完成后，我们为了提高其性能，希望做一些列处理，如把js进行压缩。</li>
</ol>
<p>在单页应用的开发中，一般情况都会遇到这3种场景，而在这三种场景webpack可以下满足我们的上述需求。通常webpack被认为是一个模块打包机，实际上它的功能不仅限于模块打包（即第一种场景下的功能），还可以进行扩展语言翻译和文件优化处理。</p>
<p>(逻辑多，文件多，项目的复杂性提高。)</p>
<h3 id="1-gulp和webpack"><a href="#1-gulp和webpack" class="headerlink" title="1. gulp和webpack"></a>1. gulp和webpack</h3><blockquote>
<p>Gulp侧重于前端开发的 <strong>整个过程</strong> 的控制管理（像是流水线），我们可以通过给gulp配置不同的task（通过Gulp中的gulp.task()方法配置，比如启动server、sass/less预编译、文件的合并压缩等等）来让gulp实现不同的功能，从而构建整个前端开发流程。</p>
</blockquote>
<p><strong>gulpfile.js</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> uglify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-uglify'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//压缩代码</span>

<span class="token comment">// 压缩js</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'uglify'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> combined <span class="token operator">=</span> combiner<span class="token punctuation">.</span><span class="token function">obj</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'src/scripts/**/*.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//需要压缩的js文件路径</span>
        sourcemaps<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//压缩js</span>
        sourcemaps<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'dest/scripts'</span><span class="token punctuation">)</span> <span class="token comment">//生成的js文件的目录</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//默认任务</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'uglify'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<blockquote>
<p>Webpack有人也称之为 <strong>模块打包机</strong> ，由此也可以看出Webpack更侧重于模块打包，当然我们可以把开发中的所有资源（图片、js文件、css文件等）都可以看成模块，最初Webpack本身就是为前端JS代码打包而设计的，后来被扩展到其他资源的打包处理。Webpack是通过loader（加载器）和plugins（插件）对资源进行处理的。</p>
</blockquote>
<h3 id="2-webpack初体验"><a href="#2-webpack初体验" class="headerlink" title="2. webpack初体验"></a>2. webpack初体验</h3><h4 id="1-生成项目依赖文件"><a href="#1-生成项目依赖文件" class="headerlink" title="1. 生成项目依赖文件"></a>1. 生成项目依赖文件</h4><pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// 执行后生成package.json文件</span>
npm init <span class="token operator">-</span>y</code></pre>

<h4 id="2-安装依赖（node环境在16-12-0下！）"><a href="#2-安装依赖（node环境在16-12-0下！）" class="headerlink" title="2. 安装依赖（node环境在16.12.0下！）"></a>2. 安装依赖（node环境在16.12.0下！）</h4><p>nvm install 16.12.0</p>
<p>nvm use 16.12.0</p>
<p>node -v </p>
<p>// 全局安装webpack和webpack-cli  （不推荐）<br>npm i <a href="mailto:webpack@4.44.1">webpack@4.44.1</a> <a href="mailto:webpack-cli@3.3.12">webpack-cli@3.3.12</a> -g</p>
<pre class="language-shell" data-language="shell"><code class="language-shell"><span class="token function">npm</span> view <span class="token punctuation">[</span>packagename<span class="token punctuation">]</span> versions</code></pre>

<p>// 最后的参数-D是安装到package.json的开发依赖devDependencies(开发环境)对象里，也可以用 –save-dev代替</p>
<pre class="language-none"><code class="language-none">安装 npm install webpack@5.73.0 webpack-cli@4.10.0 -D</code></pre>



<p>这种方式安装成功后无法通过webpack -v查看webpack版本信息，因为默认node会查找全局下的webpack。这里就要通过npx命令查看。</p>
<blockquote>
<p>npx webpack -v<br>npx webpack-cli -v<br>npx命令会在当前项目的node_modules中找到我们安装的webpack</p>
</blockquote>
<p>打包：</p>
<blockquote>
<p>npx webpack xxx.js</p>
</blockquote>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// -S是--save的简写，这样安装的话，会安装到dependencies(生产环境)对象里，也可以用 --save代替</span>
npm install jquery <span class="token operator">-</span><span class="token constant">S</span></code></pre>

<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"webpack-demo"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"description"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token string-property property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"test"</span><span class="token operator">:</span> <span class="token string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"author"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token string-property property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"webpack"</span><span class="token operator">:</span> <span class="token string">"^5.73.0"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"webpack-cli"</span><span class="token operator">:</span> <span class="token string">"^4.10.0"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"jquery"</span><span class="token operator">:</span> <span class="token string">"^3.6.0"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>

<h4 id="3-npm"><a href="#3-npm" class="headerlink" title="3. npm"></a>3. npm</h4><p>npm是随同Node.js一起安装的包管理工具<br>通过npm可以共享使用各式JS开源库,对JS开源库的版本可以直接快速的管理,使用这些基于模块开发方式让团队更好的协作开发</p>
<h5 id="全局安装和本地安装"><a href="#全局安装和本地安装" class="headerlink" title="全局安装和本地安装"></a>全局安装和本地安装</h5><p>npm install <module name=""> [-g] :使用npm安装模块<br>npm list: 查看安装信息<br>npm uninstall <module name="">:卸载模块<br>npm update <module name="">:更新模块<br>npm view <module name=""> versions 查看npm上有哪些版本 , 例如npm view less-loader versions </module></module></module></module></p>
<h5 id="cnpm的安装和使用"><a href="#cnpm的安装和使用" class="headerlink" title="cnpm的安装和使用"></a>cnpm的安装和使用</h5><p>安装指令:npm install cnpm -g –registry=<a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a></p>
<h5 id="–save与–save-dev-区别"><a href="#–save与–save-dev-区别" class="headerlink" title="–save与–save-dev 区别"></a>–save与–save-dev 区别</h5><p>dependencies是运行时依赖，devDependencies是开发时的依赖<br>–save 会把依赖包名称添加到 package.json 文件 dependencies 下<br>–save-dev 会把依赖包添加到 package.json 文件 devDependencies 下</p>
<blockquote>
<p>devDependencies与dependencies的区别：</p>
<p>在发布npm包的时候，本身dependencies下的模块会作为依赖，一起被下载；devDependencies下面的模块就不会自动下载了；但对于项目而言，npm install 会自动下载devDependencies和dependencies下面的模块。</p>
</blockquote>
<h3 id="3-创建入口文件"><a href="#3-创建入口文件" class="headerlink" title="3.创建入口文件"></a>3.创建入口文件</h3><p><code>index.html</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span> 
     ... 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./index.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>



<p><code>index.js</code></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'ul li:even'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'ul li:odd'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<p>在浏览器打开</p>
<p><img src="/2022/07/16/vue2-jin-jie/1652710340183.png" alt="1652710340183"></p>
<blockquote>
<p>为什么会这样？因为浏览器并不兼容import引入模块这种方式，所以我们要用到webpack打包</p>
</blockquote>
<h3 id="4-通过webpack打包"><a href="#4-通过webpack打包" class="headerlink" title="4. 通过webpack打包"></a>4. 通过webpack打包</h3><pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// 执行命令  output输出</span>
<span class="token comment">// 语法 webpack 入口 --output 输出地址 </span>
webpack index<span class="token punctuation">.</span>js <span class="token operator">-</span>o dist<span class="token operator">/</span>bundle<span class="token punctuation">.</span>js</code></pre>

<p><img src="/2022/07/16/vue2-jin-jie/1652710563242.png" alt="1652710563242"></p>
<blockquote>
<p>出现这个报错，这是因为命令行执行时候会找全局的webpack，但是我们并没有安装全局的webpack，所以我们可以安装全局webpack，或者是使用脚本方式启动</p>
</blockquote>
<p><strong>package.json</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"webpack-demo"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"description"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token string-property property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"start"</span><span class="token operator">:</span> <span class="token string">"webpack index.js -o dist/bundle.js"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"build"</span><span class="token operator">:</span><span class="token string">"npx webpack --mode=production"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"author"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token string-property property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"webpack"</span><span class="token operator">:</span> <span class="token string">"^4.40.2"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"webpack-cli"</span><span class="token operator">:</span> <span class="token string">"^3.3.9"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"jquery"</span><span class="token operator">:</span> <span class="token string">"^3.4.1"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>



<p>执行package.json文件中添加的start命令</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// 生成 dist文件夹和bundle.js文件</span>
npm run start</code></pre>



<p>然后再把index.html原来引入index.js的地方改成是通过webpack生成的bundle.js</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!--index.html文件--&gt;</span>
<span class="token comment">&lt;!--&lt;script src="./index.js"&gt;&lt;/script&gt;--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./dist/bundle.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre>



<p>最终浏览器看到的效果：</p>
<p><img src="/2022/07/16/vue2-jin-jie/1652710594818.png" alt="1652710594818"></p>
<h3 id="5-webpack-config-js"><a href="#5-webpack-config-js" class="headerlink" title="5. webpack.config.js"></a>5. webpack.config.js</h3><p>优化：</p>
<blockquote>
<p>webpack index.js -o dist/bundle.js 这一句其实是可以写在一个配置文件里</p>
</blockquote>
<p><strong>webpack.config.js：</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>	<span class="token comment">// dirname代表索引到文件所在目录</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>

<p><strong>package.json：</strong></p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"webpack --config webpack.config.js"</span>
  <span class="token punctuation">}</span></code></pre>

<h4 id="配置文件整体构成"><a href="#配置文件整体构成" class="headerlink" title="配置文件整体构成"></a>配置文件整体构成</h4><p><strong>webpack.config.js</strong> </p>
<ul>
<li><p>entry（入口）</p>
<p>配置webpack以哪个文件为入口起点开始打包</p>
<p>entryKey:’./src/index.js’</p>
</li>
<li><p>output（出口）</p>
<p>配置webpack打包后的资源bunduls输出到哪里，以及如何命名</p>
<p>output:{path:路径,filename:文件名}  //默认输出到dist目录下</p>
<p>//__dirname node.js变量，表示绝对路径</p>
<p>output:{path:path.resolve(__dirname,’dist/‘),filename:bundle.js} </p>
</li>
<li><p>loader（转化器） </p>
<p>webpack自身只认识js和json。loader指示webpack去处理非js资源例如css，img等，将它们处理成webpack能够认识的资源 。 翻译官。</p>
<ol>
<li><code>test</code> 属性，用于标识出应该被对应的 loader 进行转换的某个或某些文件。</li>
<li><code>use</code> 属性，表示进行转换时，应该使用哪个 loader。</li>
</ol>
</li>
<li><p>plugins （插件）</p>
<p>可用于执行范围更广的任务。 打包，压缩，环境配置等。</p>
</li>
<li><p>mode （模式）</p>
<p>告知webpack使用对应模式配置</p>
<p>development 开发配置：能让代码本地调试运行的环境</p>
<p>production  生产环境：能让代码优化上线运行的环境。</p>
<p>（都会使用一些插件，生产环境使用的插件更多） </p>
</li>
<li><p>devServer （开发服务器）</p>
</li>
</ul>
<h3 id="6-mode设置"><a href="#6-mode设置" class="headerlink" title="6. mode设置"></a>6. mode设置</h3><p>在执行打包工作时，提示的警告信息：</p>
<p><img src="/2022/07/16/vue2-jin-jie/1652779689097.png" alt="1652779689097"></p>
<p>mode模式 告知webpack使用对应模式配置</p>
<p>development 开发配置：能让代码本地调试运行的环境</p>
<p>production 生产环境：能让代码优化上线运行的环境。 </p>
<pre class="language-js" data-language="js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span><span class="token punctuation">{</span>
   <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">'production'</span>
<span class="token punctuation">}</span></code></pre>

<h3 id="7-html-webpack-plugin"><a href="#7-html-webpack-plugin" class="headerlink" title="7. html-webpack-plugin"></a>7. html-webpack-plugin</h3><p>安装：<code>npm install html-webpack-plugin@4.5.1 -D</code></p>
<p><strong>webpack.config.js</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>

<blockquote>
<p>删掉index.html文件里面的bundle.js引用，因为html-webpack-plugin会自动把打包出来的bundle自动加到我们的index.html代码里</p>
</blockquote>
<h3 id="8-loader-配置"><a href="#8-loader-配置" class="headerlink" title="8. loader 配置"></a>8. loader 配置</h3><p>webpack自身只认识js和json。loader指示webpack去处理非js资源例如css，img等，将它们处理成webpack能够认识的资源 。 翻译官。</p>
<ol>
<li><code>test</code> 属性，用于标识出应该被对应的 loader 进行转换的某个或某些文件。</li>
<li><code>use</code> 属性，表示进行转换时，应该使用哪个 loader。</li>
</ol>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">//loader的配置</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        	<span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//解析器列表 </span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>

<h4 id="8-1-css-loader"><a href="#8-1-css-loader" class="headerlink" title="8.1 css-loader"></a>8.1 css-loader</h4><p>创建一个index.css</p>
<p><strong>index.css</strong></p>
<pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>



<p><strong>index.js</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'ul li:even'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">'gray'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'ul li:odd'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> <span class="token string">'./index.css'</span></code></pre>

<p>执行npm run start</p>
<p><img src="/2022/07/16/vue2-jin-jie/1652781090502.png" alt="1652781090502"></p>
<blockquote>
<p>为什么报错，因为webpack默认是不识别<code>.css</code>文件的，需要我们通过 <code>loader</code>  将 <code>.css</code> 文件进行解释成正确的模块。</p>
</blockquote>
<p><strong>安装css-loader和style-loader</strong></p>
<pre class="language-js" data-language="js"><code class="language-js">npm install css<span class="token operator">-</span>loader@<span class="token number">5.2</span><span class="token number">.4</span> style<span class="token operator">-</span>loader@<span class="token number">2.0</span><span class="token number">.0</span> <span class="token operator">-</span><span class="token constant">D</span> 
<span class="token comment">//index.css -&gt; bundle.js -&gt; style-loader -&gt; &lt;style&gt; index.html</span>
<span class="token comment">// css-loader的作用是将index.css文件解析为webpack能识别的模块，然后打包进bundle.js里面，但是这样样式并未成功显示在浏览器中。</span>
<span class="token comment">// style-loader的作用就是将打包到bundle.js中的样式绑定到浏览器上，以style标签的形式显示出来</span></code></pre>



<p><strong>webpack.config.js</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>	<span class="token comment">// 注意：这里的数组是反向读取的（即从右往左）</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>



<h4 id="8-2-less-loader"><a href="#8-2-less-loader" class="headerlink" title="8.2 less-loader"></a>8.2 less-loader</h4><blockquote>
<p>补充：引入的文件是less</p>
<p>安装：npm install <a href="mailto:less-loader@7.2.1">less-loader@7.2.1</a> <a href="mailto:less@4.1.0">less@4.1.0</a> -D</p>
<p>规则： </p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token punctuation">{</span>
<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
</blockquote>
<h4 id="8-3-file-loader"><a href="#8-3-file-loader" class="headerlink" title="8.3 file-loader"></a>8.3 file-loader</h4><pre class="language-shell" data-language="shell"><code class="language-shell">- <span class="token number">1</span>.安装file-loader  
  - <span class="token function">npm</span> i file-loader@6.2.0  -D
- <span class="token number">2</span>.配置loader
 <span class="token punctuation">{</span>
     test:/<span class="token punctuation">\</span>.<span class="token punctuation">(</span>jpg<span class="token operator">|</span>png<span class="token operator">|</span>gif<span class="token operator">|</span>jpeg<span class="token operator">|</span>bmp<span class="token punctuation">)</span>$/,
     use:<span class="token punctuation">[</span><span class="token string">'file-loader'</span><span class="token punctuation">]</span>
 <span class="token punctuation">}</span>  </code></pre>

<p>注意：5配置</p>
<pre class="language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">{</span>
    test: /<span class="token punctuation">\</span>.<span class="token punctuation">(</span>jpg<span class="token operator">|</span>png<span class="token operator">|</span>gif<span class="token operator">|</span>jpeg<span class="token operator">|</span>bmp<span class="token punctuation">)</span>$/, 
    //webpack5版本
    type: <span class="token string">'asset/resource'</span>
<span class="token punctuation">}</span>,</code></pre>



<h4 id="8-4-ES6-转-ES5"><a href="#8-4-ES6-转-ES5" class="headerlink" title="8.4 ES6 转 ES5"></a>8.4 ES6 转 ES5</h4><blockquote>
<p>安装依赖包</p>
</blockquote>
<pre class="language-js" data-language="js"><code class="language-js">npm install babel<span class="token operator">-</span>core babel<span class="token operator">-</span>loader@<span class="token number">7.1</span><span class="token number">.5</span> babel<span class="token operator">-</span>plugin<span class="token operator">-</span>transform<span class="token operator">-</span>runtime@<span class="token number">6.23</span><span class="token number">.0</span> babel<span class="token operator">-</span>preset<span class="token operator">-</span>env@<span class="token number">1.7</span><span class="token number">.0</span> babel<span class="token operator">-</span>preset<span class="token operator">-</span>stage<span class="token operator">-</span><span class="token number">0</span>@<span class="token number">6.24</span><span class="token number">.1</span> <span class="token operator">-</span><span class="token constant">D</span></code></pre>

<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>



<blockquote>
<p>配置loader </p>
</blockquote>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token punctuation">{</span><span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'babel-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">}</span> </code></pre>

<p>exclude表示排除掉 node_modules下载的依赖项。这样可以加速网站开发，而且我们也只需要对我们的项目src </p>
<p>源文件进行编译即可。</p>
<blockquote>
<p>新增.babelrc文件 </p>
</blockquote>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span> 
    <span class="token property">"presets"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"env"</span><span class="token punctuation">,</span><span class="token string">"stage-0"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
    <span class="token property">"plugins"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"transform-runtime"</span><span class="token punctuation">]</span> 
<span class="token punctuation">}</span> </code></pre>



<p>新增并在index.js中引入main.js，然后使用es6语法 </p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>



<p>执行命令编译 </p>
<pre class="language-shell" data-language="shell"><code class="language-shell"><span class="token function">npm</span> run start </code></pre>



<p>编译后的结果</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>

<h3 id="9-webpack-dev-server"><a href="#9-webpack-dev-server" class="headerlink" title="9. webpack-dev-server"></a>9. webpack-dev-server</h3><blockquote>
<p>这时候如果修改index.html的背景颜色red改成是gray，会发现浏览器刷新也没有效果，需要再跑一次<code>npm run start</code>命令才有用，这时候就需要webpack-dev-server(热重载)</p>
</blockquote>
<p><strong>安装：</strong></p>
<pre class="language-js" data-language="js"><code class="language-js">npm install webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server@<span class="token number">3.11</span><span class="token number">.2</span> <span class="token operator">-</span><span class="token constant">D</span></code></pre>

<p><strong>配置方式</strong></p>
<pre class="language-shell" data-language="shell"><code class="language-shell">devServer: <span class="token punctuation">{</span>
    //本地服务目录 <span class="token punctuation">(</span>运行代码目录<span class="token punctuation">)</span>  -- 注意新版更改为static
    contentBase: path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'dist'</span><span class="token punctuation">)</span>,
    //域名，ip地址
    host: <span class="token string">'127.0.0.1'</span>,
    //端口号
    port: <span class="token number">8000</span>,
    //自动打开浏览器
    open: true,
    //开启HMR功能 热模块替换 <span class="token punctuation">(</span>修改配置记得重启<span class="token punctuation">)</span>
    hot: <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre>



<p><strong>package.json：</strong></p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"webpack-dev-server --config webpack.config.js --open --port 3002 --hot"</span>
  <span class="token punctuation">}</span>
<span class="token comment">// --open 自动打开浏览器</span>
<span class="token comment">// --port 服务监听的端口 3002</span>
<span class="token comment">// --hot  自动更新</span>
</code></pre>

<blockquote>
<p>这里注意：</p>
<p>1、启动webpack-dev-server后， 你在目标文件夹中是看不到编译后的文件的，实时编译后的文件都保存到了内存当中。想看到bundle.js文件，可以运行localhost:3002/bundle.js查看</p>
<p>2、既然bundle.js已经不在dist目录下，因此，如果没有其他的webpack配置项，上面的命令也可以简写为：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token string-property property">"start"</span><span class="token operator">:</span> <span class="token string">"webpack-dev-server --open --port 3002 --hot"</span>
<span class="token punctuation">}</span></code></pre>
</blockquote>
<p><strong>index.html</strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./bundle.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre>

<h3 id="10-html热更新"><a href="#10-html热更新" class="headerlink" title="10. html热更新"></a>10. html热更新</h3><p>在安装过html-webpack-plugin之后，安装：</p>
<pre class="language-js" data-language="js"><code class="language-js">npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev raw<span class="token operator">-</span>loader@<span class="token number">4.0</span><span class="token number">.2</span></code></pre>

<p>在webpack.config.js中配置raw-loader:</p>
<pre class="language-js" data-language="js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token operator">...</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(htm|html)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
         <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
           <span class="token string">'raw-loader'</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token operator">...</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>

<p>在 <code>index.js</code> 中引入html：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token string">'./index.html'</span></code></pre>



<h2 id="二、Vue-CLI使用准备"><a href="#二、Vue-CLI使用准备" class="headerlink" title="二、Vue CLI使用准备"></a>二、Vue CLI使用准备</h2><img style="width:50%" src="/2022/07/16/vue2-jin-jie/1652786813488.png">



<ul>
<li>node版本 node -v</li>
<li>npm版本 npm -v</li>
<li>vue-cli版本 vue -V</li>
</ul>
<p><img src="/2022/07/16/vue2-jin-jie/1652786906110.png" alt="1652786906110"></p>
<h3 id="Node版本"><a href="#Node版本" class="headerlink" title="Node版本"></a>Node版本</h3><blockquote>
<p>Vue CLI 需要Node.js 8.9 或者更高版本（推荐使用 <font color="red">12.11.0</font>）。你可以使用<code>nvm</code> 或 <code>nvm-window</code>来管理电脑上面的Node版本。</p>
</blockquote>
<p><strong>安装Vue CLI脚手架的包：</strong></p>
<pre class="language-js" data-language="js"><code class="language-js">npm install <span class="token operator">-</span>g @vue<span class="token operator">/</span>cli
# <span class="token constant">OR</span>
yarn global add @vue<span class="token operator">/</span>cli</code></pre>

<p>安装之后，你就可以在命令行中访问 <code>vue</code> 命令。你可以通过简单运行 <code>vue</code>，看看是否展示出了一份所有可用命令的帮助信息，来验证它是否安装成功。</p>
<p>你还可以用这个命令来检查其版本是否正确 (4.x)：</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">vue --version
vue -V</code></pre>



<p>如果安装比较慢，可以把下载源切换成淘宝的源：</p>
<p>npm  对应的淘宝下载源设置：</p>
<pre class="language-shell" data-language="shell"><code class="language-shell">//切换taobao镜像源
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org/
// 查看下载源
<span class="token function">npm</span> config get registry</code></pre>

<p>yarn  对应的淘宝下载源设置：</p>
<pre class="language-shell" data-language="shell"><code class="language-shell">//切换taobao镜像源
<span class="token function">yarn</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org/

// 查看下载源
<span class="token function">yarn</span> config get registry</code></pre>



<h2 id="三、创建项目"><a href="#三、创建项目" class="headerlink" title="三、创建项目"></a>三、创建项目</h2><h3 id="3-1-初始化项目方式一："><a href="#3-1-初始化项目方式一：" class="headerlink" title="3.1 初始化项目方式一："></a>3.1 初始化项目方式一：</h3><p><strong>vue create</strong></p>
<p>运行以下命令来创建一个新项目：</p>
<pre class="language-js" data-language="js"><code class="language-js">vue create hello<span class="token operator">-</span>world</code></pre>



<p>你会被提示选取一个 preset。你可以选默认的包含了基本的 Babel + ESLint 设置的 preset，也可以选“手动选<br>择特性”来选取需要的特性。</p>
<p><img src="/2022/07/16/vue2-jin-jie/1652710735946.png" alt="1652710735946"></p>
<p>这个默认的设置非常适合快速创建一个新项目的原型，而手动设置则提供了更多的选项，它们是面向生产的项目更加需要的。</p>
<p><img src="/2022/07/16/vue2-jin-jie/1652710748466.png" alt="1652710748466"></p>
<ol>
<li>vue create 项目名称<img src="/2022/07/16/vue2-jin-jie/1610981526393.png" width="400px" height="50px" align="left"></li>
</ol>
<p>2）选择默认配置或者自定义配置<br><img src="/2022/07/16/vue2-jin-jie/1610981552949.png" height="200px" align="left"> </p>
<p>3）选择需要安装项</p>
 <img src="/2022/07/16/vue2-jin-jie/1611025179850.png" height="280px" align="left">















<p>当你选择后会出现上面图上的东西，这里你可以自由选择用哪些配置，按上下键选择哪一个，按空格键确定，所有的都选择好后，按enter键进行下一步，这里演示，我随便选了几个</p>
<p>4)选择vue版本<br><img src="/2022/07/16/vue2-jin-jie/1610981662221.png" width="560px" height="50px" align="left"> </p>
<p>4）是否要以history模式 【如果安装了Router，会出现下面选择】<br><img src="/2022/07/16/vue2-jin-jie/1610981712814.png" width="560px" height="200px" align="left"> </p>
<p>是否要以history模式，如果选择yes，后端还需要作操作。路径好看 <a target="_blank" rel="noopener" href="http://localhost:8080/about">http://localhost:8080/about</a><br>选择no，后端无须修改操作。路径不好看 <a target="_blank" rel="noopener" href="http://localhost:8080/#/">http://localhost:8080/#/</a></p>
<p>5）选择css预处理器 【如果安装了Css Pre …，会出现下面选择】<br><img src="/2022/07/16/vue2-jin-jie/1611025325208.png" width="500px" align="left"> </p>
<p>Sass/SCSS (with dart-sass)  ：世界上最成熟、最稳定、最强大的专业级CSS扩展语言<br>Sass/SCSS (with node-sass)  ：世界上最成熟、最稳定、最强大的专业级CSS扩展语言  (推荐)<br>Less     ：(推荐) 一门 CSS 预处理语言,它扩展了 CSS 语言,增加了变量、Mixin、函数等特性<br>Stylus   ： 富于表现力、动态的、健壮的 CSS</p>
<p>6）选择格式化配置方案  【如果安装了eslink，会出现下面选择】<br> ESLint with error prevention only  仅错误预防<br> ESLint + Airbnb config  Airbnb配置<br> ESLint + Standard config 标准配置<br> ESLint + Prettier</p>
<p>7）选择配置文件存放方式<br><img src="/2022/07/16/vue2-jin-jie/1610981845695.png" width="500px" height="200px" align="left"> </p>
<p>上边这俩意思问，babel,postcss,eslint这些配置文件放哪？<br>第一个是：放独立文件放置<br>第二个是：放package.json里<br>这里推荐放单独配置文件 </p>
<p>8）是否将以上这些将此保存为未来项目的预配置吗<br><img src="/2022/07/16/vue2-jin-jie/1610981891047.png" width="500px" height="200px" align="left"> </p>
<p>就有你以前选择的配置了，不用重新再配置一遍了<br>最后回车开始下载模板了</p>
<p>对于每一项的功能，此处做个简单描述：</p>
<blockquote>
<p>( ) Choose Vue verion //选择vue版本<br>( ) Babel //转码器，可以将ES6代码转为ES5代码，从而在现有环境执行。<br>( ) TypeScript       // TypeScript是一个JavaScript（后缀.js）的超集（后缀.ts）包含并扩展了 JavaScript 的语法，需要被编译输出为JavaScript在浏览器运行<br>( ) Progressive Web App (PWA) Support// 渐进式Web应用程序<br>( ) Router // vue-router（vue路由）<br>( ) Vuex // vuex（vue的状态管理模式）<br>( ) CSS Pre-processors // CSS 预处理器（如：less、sass）<br>( ) Linter / Formatter // 代码风格检查和格式化（如：ESlint）<br>( ) Unit Testing // 单元测试（unit tests）<br>( ) E2E Testing // e2e（end to end） 支持E2E测试</p>
</blockquote>
<p>如果你决定手动选择特性，在操作提示的最后你可以选择将已选项保存为一个将来可复用的 preset</p>
<blockquote>
<p>~/.vuerc</p>
<p>被保存的 preset 将会存在用户的 home 目录下一个名为 <code>.vuerc</code> 的 JSON 文件里。如果你想要修改被保存的 preset / 选项，可以编辑这个文件。</p>
<p>在项目创建的过程中，你也会被提示选择喜欢的包管理器或使用<a target="_blank" rel="noopener" href="https://npm.taobao.org/">淘宝 npm 镜像源</a>以更快地安装依赖。这些选择也将会存入 <code>~/.vuerc</code>。</p>
</blockquote>
<h3 id="3-2-初始化项目方式二：图形化操作"><a href="#3-2-初始化项目方式二：图形化操作" class="headerlink" title="3.2 初始化项目方式二：图形化操作"></a>3.2 初始化项目方式二：图形化操作</h3><p>图形化操作： vue ui</p>
<h3 id="3-3-项目结构"><a href="#3-3-项目结构" class="headerlink" title="3.3 项目结构"></a>3.3 项目结构</h3><p><strong>项目目录</strong></p>
<p><img src="/2022/07/16/vue2-jin-jie/1652710772862.png" alt="1652710772862"></p>
<pre class="language-js" data-language="js"><code class="language-js">node_modules
<span class="token keyword">public</span> <span class="token comment">// 静态资源文件</span>
    <span class="token operator">|</span><span class="token operator">-</span>favicon<span class="token punctuation">.</span>ico
    <span class="token operator">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>html
src <span class="token comment">// 项目源代码，书写代码的地方</span>
    <span class="token operator">|</span><span class="token operator">-</span>assets
    <span class="token operator">|</span><span class="token operator">-</span>App<span class="token punctuation">.</span>vue
    <span class="token operator">|</span><span class="token operator">-</span>main<span class="token punctuation">.</span>js
<span class="token punctuation">.</span>browserslistrc    <span class="token comment">// 浏览器相关支持情况</span>
<span class="token punctuation">.</span>eslintrc<span class="token punctuation">.</span>js       <span class="token comment">// 代码相关支持情况</span>
<span class="token punctuation">.</span>gitignore         <span class="token comment">// Git忽略文件</span>
babel<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js    <span class="token comment">// babel配置ES语法 转换</span>
<span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json  <span class="token comment">// npm安装依赖库的具体信息</span>
<span class="token keyword">package</span><span class="token punctuation">.</span>json       <span class="token comment">// npm依赖库版本信息</span>
postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js  <span class="token comment">// css相关转换</span>
<span class="token constant">README</span><span class="token punctuation">.</span>md          <span class="token comment">// 项目说明</span>
vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js      <span class="token comment">// Vue及webpack配置项</span></code></pre>

<h3 id="3-4-vue-config-js"><a href="#3-4-vue-config-js" class="headerlink" title="3.4 vue.config.js"></a>3.4 vue.config.js</h3><p><code>vue.config.js</code> 是一个可选的配置文件，如果项目的 (和 <code>package.json</code> 同级的) 根目录中存在这个文件，那么它会被 <code>@vue/cli-service</code> 自动加载。你也可以使用 <code>package.json</code> 中的 <code>vue</code> 字段，但是注意这种写法需要你严格遵照 JSON 的格式来写。</p>
<p>这个文件应该导出一个包含了选项的对象：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// vue.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 选项...(例如：)</span>
  <span class="token literal-property property">lintOnSave</span><span class="token operator">:</span> <span class="token boolean">false</span>	<span class="token comment">// 关闭eslint</span>
<span class="token punctuation">}</span></code></pre>





<p>脚手架中父子传值。</p>
<h2 id="其他：（了解）"><a href="#其他：（了解）" class="headerlink" title="其他：（了解）"></a>其他：（了解）</h2><h3 id="1-VsCode用户片段提供"><a href="#1-VsCode用户片段提供" class="headerlink" title="1. VsCode用户片段提供"></a>1. VsCode用户片段提供</h3><p>请在VScode中设置如下代码片段，以用于后面每一个案例的创建</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>
	<span class="token property">"demo"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	  <span class="token property">"prefix"</span><span class="token operator">:</span> <span class="token string">"vue"</span><span class="token punctuation">,</span>
	  <span class="token property">"body"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">"&lt;template&gt;"</span><span class="token punctuation">,</span>
		<span class="token string">"\t&lt;div&gt;"</span><span class="token punctuation">,</span>
		<span class="token string">"\t\t$0"</span><span class="token punctuation">,</span>
		<span class="token string">"\t&lt;/div&gt;"</span><span class="token punctuation">,</span>
		<span class="token string">"&lt;/template&gt;"</span><span class="token punctuation">,</span>
		<span class="token string">""</span><span class="token punctuation">,</span>
		<span class="token string">"&lt;script&gt;"</span><span class="token punctuation">,</span>
		<span class="token string">"export default {"</span><span class="token punctuation">,</span>
		<span class="token string">"\tdata () {"</span><span class="token punctuation">,</span>
		<span class="token string">"\t\treturn {\n"</span><span class="token punctuation">,</span>
		<span class="token string">" "</span><span class="token punctuation">,</span>
		<span class="token string">"\t\t}"</span><span class="token punctuation">,</span>
		<span class="token string">"\t}"</span><span class="token punctuation">,</span>
		<span class="token string">"}"</span><span class="token punctuation">,</span>
		<span class="token string">"&lt;/script&gt;"</span><span class="token punctuation">,</span>
		<span class="token string">" "</span><span class="token punctuation">,</span>
		<span class="token string">"&lt;style lang = \"less\" scoped&gt;"</span><span class="token punctuation">,</span>
		<span class="token string">"\t"</span><span class="token punctuation">,</span>
		<span class="token string">"&lt;/style&gt;"</span>
	  <span class="token punctuation">]</span><span class="token punctuation">,</span>
	  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"自定义的一个vue代码段"</span>
	<span class="token punctuation">}</span>
  <span class="token punctuation">}</span></code></pre>

<h3 id="2-“-x2F-”路径提示配置"><a href="#2-“-x2F-”路径提示配置" class="headerlink" title="2.“@/”路径提示配置"></a>2.“@/”路径提示配置</h3><p>安装 Path Intellisense插件</p>
<p>打开设置 - 首选项 - 搜索 <code>Path Intellisense</code> - 打开 <code>settings.json</code> ，添加：</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token property">"path-intellisense.mappings"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token property">"@"</span><span class="token operator">:</span> <span class="token string">"${workspaceRoot}/src"</span>
 <span class="token punctuation">}</span></code></pre>

<p>在项目 <code>package.json</code> 所在同级目录下创建文件 <code>jsconfig.json</code>：</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"ES6"</span><span class="token punctuation">,</span>
        <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span>
        <span class="token property">"allowSyntheticDefaultImports"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"./"</span><span class="token punctuation">,</span>
        <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"@/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/*"</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"node_modules"</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>

<p>最后<strong>重启打开</strong>即可</p>
<h1 id="第七天"><a href="#第七天" class="headerlink" title="第七天"></a>第七天</h1><h2 id="一、父子传值"><a href="#一、父子传值" class="headerlink" title="一、父子传值"></a>一、父子传值</h2><pre class="language-vue" data-language="vue"><code class="language-vue">parent.vue

&lt;template&gt;
  &lt;div&gt;
      &lt;h1&gt;父组件&lt;/h1&gt;
      &lt;child title="首页" @change="getVal"&gt;&lt;/child&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
//1.引入子组件
import child from './01child.vue'
export default {
    components:{child},
    methods:{
        getVal(val){
            console.log('接受到子组件的值为:',val);            
        }
    }
}
&lt;/script&gt;
 
 child.vue
 
 &lt;template&gt;
  &lt;div&gt;
      &lt;h1&gt;子组件&lt;/h1&gt;
      &lt;p&gt;接受父的数据：{{title}}&lt;/p&gt;
      &lt;button @click="sendFn"&gt;点击传值&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    props:['title'],
    methods:{
        sendFn(){
            this.$emit("change",'我是子组件')
        }
    }
}
&lt;/script&gt;
</code></pre>

<h2 id="二、脚手架中完成"><a href="#二、脚手架中完成" class="headerlink" title="二、脚手架中完成"></a>二、脚手架中完成</h2><img style="width:50%" src="/2022/07/16/vue2-jin-jie/1652886215394.png">

<h2 id="三、练习-tabbar案例"><a href="#三、练习-tabbar案例" class="headerlink" title="三、练习-tabbar案例"></a>三、练习-tabbar案例</h2><img style="width:50%" src="/2022/07/16/vue2-jin-jie/../../真 · 学习资料/狼/vue2进阶/Vue-day07-基于脚手架中开发/01-笔记/全家桶day07img/1652886013395.png">

<p>tabbar.vue</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class="tabbarwrap"&gt;
        &lt;item title="我的"  mark="nav1" :curr="currnav" @change="getVal"&gt;
            &lt;template #normalImg&gt;  &lt;img src="../assets/images/1.png" alt="" /&gt; &lt;/template&gt;
            &lt;template #activeImg&gt;  &lt;img src="../assets/images/1s.png" alt="" /&gt; &lt;/template&gt;
        &lt;/item&gt;
	   ...
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import item from './item.vue'
export default {
    components:{item},
    data(){
        return {
            currnav:'nav1'
        }
    },
    methods:{
        getVal(val){
            this.currnav = val;
        }
    }
}
&lt;/script&gt;
&lt;style&gt;
    .tabbarwrap{
        position: fixed;
        display: flex;
        bottom: 0;
        width: 100%;
        border-top: 1px solid gray;  
        justify-content: space-between;
        padding: 5px;
    }
&lt;/style&gt;</code></pre>

<p>item.vue</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class="item" @click="fn"&gt; 
    &lt;slot :name="flag ? 'activeImg' : 'normalImg'"&gt;&lt;/slot&gt; 
    &lt;p&gt;
      &lt;span :class="{ active: flag }"&gt;{{ title }}&lt;/span&gt;
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  props: ["title", "mark", "curr"],
  computed: {
    flag() {
      return this.mark == this.curr;
    },
  },
  methods: {
    fn() { 
      this.$emit("change", this.mark);
    },
  },
};
&lt;/script&gt;

&lt;style lang="less" scoped&gt;
.item {
  flex: 1;
  text-align: center;
  img {
    width: 30px;
    height: 30px;
  }
  span {
    font-size: 12px;
    &amp;.active {
      color: red;
    }
  }
}
&lt;/style&gt;</code></pre>

<h2 id="四、ref与-refs"><a href="#四、ref与-refs" class="headerlink" title="四、ref与$refs"></a>四、ref与$refs</h2><p>vue中获取页面里的某个元素（标签或组件），可以给它绑定ref属性，有点类似于给它添加id名。</p>
<h3 id="1、简单使用"><a href="#1、简单使用" class="headerlink" title="1、简单使用"></a>1、简单使用</h3><pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div class=""&gt;
     &lt;h3 ref="title"&gt;{{msg}}&lt;/h3&gt;
     &lt;button @click="btnclick"&gt;按钮&lt;/button&gt;
 &lt;/div&gt;
&lt;/template&gt;
 
&lt;script&gt;
export default {
  data() {
    return {
      msg: "你好"
    };
  },
  methods: {
    btnclick() {
      console.log(this.$refs.title);		// 得到h3标签
    }
  }
};
&lt;/script&gt;
 
&lt;style lang = "less" scoped&gt;
&lt;/style&gt;</code></pre>

<h3 id="2、子组件中的数据获取及方法调用"><a href="#2、子组件中的数据获取及方法调用" class="headerlink" title="2、子组件中的数据获取及方法调用"></a>2、子组件中的数据获取及方法调用</h3><p>子组件：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div class=""&gt;
     &lt;h4&gt;{{num}}&lt;/h4&gt;
 &lt;/div&gt;
&lt;/template&gt;
 
&lt;script&gt;
export default {
  data() {
    return {
      num: 100
    };
  },
  methods: {
      subFn(){
          console.log('子组件中的方法')
      }
  }
};
&lt;/script&gt;
 
&lt;style lang = "less" scoped&gt;
&lt;/style&gt;</code></pre>

<p>父组件：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div class=""&gt;
     &lt;Sub ref="sub" /&gt;
     &lt;button @click="btnclick"&gt;按钮&lt;/button&gt;
 &lt;/div&gt;
&lt;/template&gt;
 
&lt;script&gt;
import Sub from '../components/Sub'
export default {
  methods: {
    btnclick() {
      console.log(this.$refs.sub.num);	// 100
      this.$refs.sub.subFn();						// '子组件中的方法'
    }
  },
  components: {
      Sub
  }
};
&lt;/script&gt;
 
&lt;style lang = "less" scoped&gt;
&lt;/style&gt;</code></pre>

<h2 id="五、生命周期函数"><a href="#五、生命周期函数" class="headerlink" title="五、生命周期函数"></a>五、生命周期函数</h2><blockquote>
<p>什么是生命周期： 从Vue创建、运行、到销毁期间，总是伴随着各种各样的事件，这些事件，统称为生命周期。</p>
<p>生命周期的作用：</p>
<p>简单来说，了解了Vue的生命周期，我们就知道了在实例进行到某个阶段，我们可以做些什么，</p>
<p>或者说我们的这个操作要在Vue的那个阶段，那个位置执行才合适，这对我们写Vue的代码很有帮助。</p>
</blockquote>
<p><strong>生命周期钩子函数：</strong>就是生命周期事件的别名；</p>
<h3 id="初始"><a href="#初始" class="headerlink" title="初始"></a>初始</h3><p><strong>beforeCreate：</strong>实例刚刚在内存中被创建出来，此时还没有初始化 <code>data</code> 和 <code>methods</code> 属性。</p>
<p><strong>created：</strong>实例已经在内存中创建好，此时 <code>data</code>和<code>methods</code> 已经创建好，此时还没有开始编译模板</p>
<h3 id="挂载"><a href="#挂载" class="headerlink" title="挂载"></a>挂载</h3><p><strong>beforeMount：</strong>此时已经完成了模板编译，但是还没有挂载到页面中；</p>
<p><strong>mounted：</strong>这个时候已经把编译好的模板挂载到页面指定的容器里；</p>
<blockquote>
<p><code>beforeMount:</code> <code>data</code> 的数据可以访问和修改，而且此时的模板已经编译好了，还没有更新到页面中</p>
<p><code>mounted:</code> 此时编译的模板更新到页面中了</p>
</blockquote>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><p><strong>beforeUpdate：</strong>状态更新之前执行此函数，此时的 <code>data</code> 中的数据是最新，但是界面上显示的还是旧的，因为此时还没有开始重新渲染DOM节点；</p>
<p><strong>updated：</strong>实例更新完毕之后调用此函数，此时<code>data</code> 中的状态值和界面上显示的数据，都已经完成了更新，界面已经被重新渲染好了；</p>
<blockquote>
<p><strong>beforeUpdate：</strong> 此时修改输入框的内容，<code>data</code>中的数据已经更新了，但是页面上显示的还是旧数据；</p>
<p><strong>updated：</strong>此时 <code>data</code> 的内容已经更新，页面显示的也是最新的数据。</p>
</blockquote>
<h3 id="销毁"><a href="#销毁" class="headerlink" title="销毁"></a>销毁</h3><p><strong>beforeDestroy：</strong>实例销毁之前调用，在这一步，实例仍然完全可用。</p>
<p><strong>destroyed：</strong>实例销毁后调用，调用后，Vue实例指向的所以东西会被解绑，所有的事件监听器会被移除，所有的子实力也会被销毁。</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 
生命周期钩子函数： vue实例从创建到销毁过程中自动执行的函数。
创建 beforeCreate created
挂载 beforeMount  mounted
更新 beforeUpdate updated
销毁 beforeDestroy destroyed
作用：能在阶段做什么事情。

*名称！ 什么时候执行，顺序！
--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>msg<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{{msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">"hello"</span><span class="token punctuation">,</span>
                <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"-------------beforeCreate-----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"el"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">,</span> <span class="token string">"msg:"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span> <span class="token string">"p："</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myp<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//el undefined msg: undefined p： undefined</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"-------------created-----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"el"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">,</span> <span class="token string">"msg:"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span> <span class="token string">"p："</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myp<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//el undefined msg: hello p： undefined</span>
                <span class="token comment">//发起异步请求，请求数据。（提前） 体验更好</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"-------------beforeMount-----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"el"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">,</span> <span class="token string">"msg:"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span> <span class="token string">"p："</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myp<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//  this.$el 有值，但是并未渲染msg数据    msg: hello p： undefined</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"-------------mounted-----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"el"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">,</span> <span class="token string">"msg:"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span> <span class="token string">"p："</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myp<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 都有值</span>
                <span class="token comment">//滚动条数据。获取dom数据</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"-------------beforeUpdate-----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"el"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">,</span> <span class="token string">"msg:"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span> <span class="token string">"p："</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"-------------updated-----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"el"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">,</span> <span class="token string">"msg:"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span> <span class="token string">"p："</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"-------------beforeDestroy-----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"el"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">,</span> <span class="token string">"msg:"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span> <span class="token string">"p："</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myp<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//清除事件</span>
                <span class="token comment">//清除定时器</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"-------------destroyed-----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"el"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">,</span> <span class="token string">"msg:"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span> <span class="token string">"p："</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></code></pre>

<h3 id="生命周期解读"><a href="#生命周期解读" class="headerlink" title="生命周期解读"></a>生命周期解读</h3><p><img src="/2022/07/16/vue2-jin-jie/1657703403507.png" alt="1657703403507"></p>
<h3 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h3><p><img src="/2022/07/16/vue2-jin-jie/1657703241013.png" alt="1657703241013"></p>
<h3 id="图解"><a href="#图解" class="headerlink" title="图解"></a>图解</h3><p><img src="/2022/07/16/vue2-jin-jie/1652887199109.png" alt="1652887199109"></p>
<blockquote>
<p> 父子组件场景: </p>
<p> ​    加载渲染过程: </p>
<p> ​    父beforeCreate-&gt;父created-&gt;父beforeMount-&gt;子beforeCreate-&gt;子created-&gt;子beforeMount-&gt;子mounted-&gt;父mounted  </p>
<p> ​    子组件更新过程: </p>
<p> ​    父beforeUpdate-&gt;子beforeUpdate-&gt;子updated-&gt;父updated </p>
<p> ​    销毁过程: </p>
<p> ​    父beforeDestroy-&gt;子beforeDestroy-&gt;子destroyed-&gt;父destroyed </p>
</blockquote>
<h2 id="六、-nextTick"><a href="#六、-nextTick" class="headerlink" title="六、$nextTick"></a>六、$nextTick</h2><p>在挂在阶段之前，我们是拿不到dom标签上及其数据的，如果我们想要<strong>在挂载阶段之前的函数中获取挂载后的数据</strong>，就需要使用$nextTick</p>
<p>$nextTick有两种基本使用方法：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// 1、CallBack形式</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>title<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 2、Promise形式</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>title<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<p>Comp1.vue中：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div&gt;
        &lt;p ref="op"&gt;文字&lt;/p&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    data () {
        return {
        }
    },
    created(){
        // 在该阶段，我们获取不到元素
        console.log(this.$refs.op);  // undefined
        this.$nextTick(()=&gt;{
            console.log(this.$refs.op.innerHTML); //文字
        })
        this.$nextTick().then(()=&gt;{
            console.log(this.$refs.op.innerHTML);  //文字
        })
    }
}
&lt;/script&gt;</code></pre>

<h2 id="七、Mixins混入"><a href="#七、Mixins混入" class="headerlink" title="七、Mixins混入"></a>七、Mixins混入</h2><p>mixins就是定义一部分公共的方法或者计算属性,然后混入到各个组件中使用,方便管理与统一修改。同一个生命周期，混入对象会比组件的先执行。</p>
<h3 id="1、导出mixins"><a href="#1、导出mixins" class="headerlink" title="1、导出mixins"></a>1、导出mixins</h3><p>在src下创建 <code>mixins/index.js</code>，写入：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> MixinsFn <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"这是mixins触发的created"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>

<h3 id="2、引用mixins"><a href="#2、引用mixins" class="headerlink" title="2、引用mixins"></a>2、引用mixins</h3><pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class="about"&gt;
    &lt;h1&gt;This is an about page&lt;/h1&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import { MixinsFn } from '@/mixins/index.js'
export default {
  created(){
    console.log("这是about触发的created")
  },
  mixins: [MixinsFn]
}
&lt;/script&gt;</code></pre>

<p>我们会发现，<code>mixins中的created</code> 比 <code>about中的created</code> 优先执行。</p>
<h2 id="八、Axios-重点"><a href="#八、Axios-重点" class="headerlink" title="八、Axios(重点)"></a>八、Axios(重点)</h2><p>在Vue和React等大型项目中，我们常用的数据请求方式，就是Axios。Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。</p>
<p>官网地址：<a target="_blank" rel="noopener" href="http://www.axios-js.com/">http://www.axios-js.com/</a></p>
<h3 id="2-1、安装"><a href="#2-1、安装" class="headerlink" title="2.1、安装"></a>2.1、安装</h3><pre class="language-CQL" data-language="CQL"><code class="language-CQL">yarn add axios</code></pre>

<h3 id="2-2、使用"><a href="#2-2、使用" class="headerlink" title="2.2、使用"></a>2.2、使用</h3><h4 id="axios统一使用格式"><a href="#axios统一使用格式" class="headerlink" title="* axios统一使用格式"></a>* axios统一使用格式</h4><pre class="language-js" data-language="js"><code class="language-js">axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">)</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 直白一点表示：</span>

axios
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

axios
  <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<h4 id="实际操作："><a href="#实际操作：" class="headerlink" title="* 实际操作："></a>* 实际操作：</h4><h5 id="1、开启后端服务"><a href="#1、开启后端服务" class="headerlink" title="1、开启后端服务"></a>1、开启后端服务</h5><p>打开 <code>backend</code> 目录，执行 <code>npm i</code> 命令，安装依赖成功后再执行 <code>node server.js</code>，到浏览器输入 <code>http://localhost:3000</code> 查看接口文档。</p>
<h5 id="2、组件中发起请求："><a href="#2、组件中发起请求：" class="headerlink" title="2、组件中发起请求："></a>2、组件中发起请求：</h5><p>发送get请求：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// get请求</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:3000/getdata"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios
  <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost:3000/postdata"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">num</span><span class="token operator">:</span><span class="token number">123</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h5 id="3、解决跨域"><a href="#3、解决跨域" class="headerlink" title="3、解决跨域"></a>3、解决跨域</h5><p>到此，发现跨域，解决方案是找到 <code>vue.config.js</code> :</p>
<pre class="language-js" data-language="js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token string">"http://localhost:3000"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>

<p>然后请求改写：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// get请求</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/getdata"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 上面的请求也可以这样做</span>
axios
  <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/postdata"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">num</span><span class="token operator">:</span><span class="token number">123</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h2 id="九、图片资源导入方式"><a href="#九、图片资源导入方式" class="headerlink" title="九、图片资源导入方式"></a>九、图片资源导入方式</h2><p>放置在src目录下的图片资源有三种导入方式：</p>
<p>1、src的相对路径和@写法，</p>
<p>2、import写法</p>
<p>3、require写法</p>
<p>对于一张图片而言，我可以直接src引入相对路径，我还可以使用模块化的方式引入，无论是require，还是import都可以。</p>
<p>但这里记住，<strong>在模板中，背景图不可以使用相对路径直接引入</strong>，只能通过模块化方式引入，常见手法：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div&gt;
        &lt;img src="../assets/img.jpg" alt=""&gt;
        &lt;img src="@/assets/logo.png" alt=""&gt;
        &lt;img :src="img01" alt=""&gt;
        &lt;img :src="img02" alt=""&gt;
        &lt;div class="box"&gt;&lt;/div&gt;
        &lt;div class="box2" :style="{background:'url('+img01+')'}"&gt;&lt;/div&gt;
        &lt;div class="box2" :style="{background:'url('+img02+')'}"&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import imgSrc from "@/assets/img.jpg"
export default {
    data () {
        return {
            img01:require("@/assets/logo.png"),
            img02:imgSrc,

        }
    }
}
&lt;/script&gt;
 
&lt;style lang = "less" scoped&gt;
.box{
    width: 300px;
    height: 300px;
    background: url("../assets/img.jpg");
}
.box2{
    width: 300px;
    height: 300px;
}
&lt;/style&gt;</code></pre>



<h2 id="十、环境变量"><a href="#十、环境变量" class="headerlink" title="十、环境变量"></a>十、环境变量</h2><p>我们实际开发中，往往有多种环境，如：</p>
<ul>
<li>development 模式用于 vue-cli-service serve</li>
<li>production 模式用于 vue-cli-service build 和 vue-cli-service test:e2e</li>
<li>test 模式用于 vue-cli-service test:unit</li>
</ul>
<p>甚至还有其他的，这里我们只讨论 development和production。</p>
<p>此处有几个要注意的点：</p>
<ol>
<li>一个模式可以包含多个环境变量</li>
<li>每个模式都会将环境变量中 NODE_ENV 的值设置为模式的名称</li>
<li>可以通过为 .env 文件增加后缀来设置某个模式下特有的环境变量</li>
<li>为一个特定模式准备的环境文件 (例如 .env.production) 将会比一般的环境文件 (例如 .env) 拥有更高的优先级</li>
</ol>
<pre class="language-jsx" data-language="jsx"><code class="language-jsx"><span class="token punctuation">.</span>env                # 在所有的环境中被载入
<span class="token punctuation">.</span>env<span class="token punctuation">.</span>local          # 在所有的环境中被载入，但会被 git 忽略
<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token punctuation">[</span>mode<span class="token punctuation">]</span>         # 只在指定的模式中被载入，优先级高于<span class="token punctuation">.</span>env和<span class="token punctuation">.</span>env<span class="token punctuation">.</span>local
<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token punctuation">[</span>mode<span class="token punctuation">]</span><span class="token punctuation">.</span>local   # 只在指定的模式中被载入，但会被 git 忽略，优先级高于<span class="token punctuation">.</span>env和<span class="token punctuation">.</span>env<span class="token punctuation">.</span>local</code></pre>

<p>一般环境变量文件都创建在根目录下，我们创建以下两份：</p>
<p><code>.env.development</code> 文件：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token constant">NODE_ENV</span><span class="token operator">=</span>development
<span class="token constant">VUE_APP_BASE_URL</span><span class="token operator">=</span><span class="token operator">/</span></code></pre>

<p><code>.env.production</code> 文件：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token constant">NODE_ENV</span> <span class="token operator">=</span> production
<span class="token constant">VUE_APP_BASE_URL</span> <span class="token operator">=</span> <span class="token string">'http://www.baidu.com'</span></code></pre>

<p>注意：</p>
<ul>
<li>NODE_ENV - 是 “development”、“production” 、”test”或者自定义的值。具体的值取决于应用运行的模式</li>
<li>BASE_URL - 会和 vue.config.js 中的 publicPath 选项相符，即你的应用会部署到的基础路径</li>
<li>除了 NODE_ENV 和 BASE_URL，其他的环境变量必须以 VUE_APP_ 开头</li>
<li>项目中使用：process.env.环境变量名，eg：VUE_APP_BASE_URL</li>
</ul>
<p>我们到任意一个组件中：</p>
<pre class="language-js" data-language="js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">// development</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_BASE_URL</span><span class="token punctuation">)</span>	<span class="token comment">// /</span></code></pre>

<p>通过在 <code>package.json</code> 中的 <code>scripts</code> 下，使用mode，我们可以切换环境：</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service serve --open --port 3000 --mode prod"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service build --mode dev"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre>

<p>再到任意一个组件中：</p>
<pre class="language-js" data-language="js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span><span class="token punctuation">;</span>				
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_BASE_URL</span><span class="token punctuation">)</span>	</code></pre>

<h2 id="什么是SPA？"><a href="#什么是SPA？" class="headerlink" title="什么是SPA？"></a>什么是SPA？</h2><p>Single Page Application，中文：单页应用。</p>
<p>以下两个链接请用浏览器的手机模拟器打开：</p>
<p>单页应用有很多，比如：<a target="_blank" rel="noopener" href="https://m.huxiu.com/">https://m.huxiu.com/</a>  <a target="_blank" rel="noopener" href="https://music.163.com/">https://music.163.com/</a></p>
<p>非单页应用也是以往的开发习惯，比如：<a target="_blank" rel="noopener" href="https://36kr.com/">https://36kr.com/</a> </p>
<h2 id="一、什么是路由？"><a href="#一、什么是路由？" class="headerlink" title="一、什么是路由？"></a>一、什么是路由？</h2><p><img src="/2022/07/16/vue2-jin-jie/Vue-day08-Router.png" alt="Vue-day08-Router"></p>
<p>说起路由你想起了什么？</p>
<p>路由器，那路由器是用来做什么的，你有没有想过？</p>
<ul>
<li>路由时决定数据包从来源到目的地的路径；</li>
<li>将输入端的数据转移到合映射表适的输出端；</li>
<li>路由中最重要的概念就是路由表：<strong>路由表的本质就是一个映射表，决定了数据包的指向</strong>；</li>
</ul>
<h2 id="二、后端路由-课外读物，了解即可"><a href="#二、后端路由-课外读物，了解即可" class="headerlink" title="二、后端路由(课外读物，了解即可)"></a>二、后端路由(课外读物，了解即可)</h2><blockquote>
<ol>
<li>早期的网站开发整个HTML页面是由服务器来渲染的。服务器将渲染好的对应的HTML页面返回给客户端进行展示；</li>
<li>但是一个网站包含很多页面，那服务器是怎么处理的呢？<ol>
<li>每个页面都有对应的网址，也就是URL</li>
<li>URL会发送给到服务器，服务器会通过正则对该URL进行匹配，最后交给Controller进行处理</li>
<li>Controller进行处理，最终生成HTML或者数据，然后返回给前端。</li>
<li>这其实就是服务器的一个IO操作，这其实就是对后端对路由的解析</li>
</ol>
</li>
<li>后端渲染的好处，相对于发送ajax请求拿数据，可以提高首屏渲染的性能，也有利于SEO的优化；</li>
<li>后端路由的缺点：<ol>
<li>另一种情况是前端开发人员如果要开发页面, 需要通过PHP和Java等语言来编写页面代码</li>
<li>而且通常情况下HTML代码和数据以及对应的逻辑会混在一起, 编写和维护都是非常糟糕的事情</li>
</ol>
</li>
</ol>
</blockquote>
<h2 id="三、前端路由-了解"><a href="#三、前端路由-了解" class="headerlink" title="三、前端路由(了解)"></a>三、前端路由(了解)</h2><blockquote>
<p>前后端分离阶段：</p>
<ul>
<li>随着Ajax的出现，有了前后端分离的开发模式；</li>
<li>后端只提供API来返回数据（json，xml），前端通过Ajax获取数据，并且可以通过JavaScript将数据渲染到页面中</li>
<li>这样做最大的优点就是前后端责任的清晰, 后端专注于数据上, 前端专注于交互和可视化上</li>
<li>并且当移动端(iOS/Android)出现后, 后端不需要进行任何处理, 依然使用之前的一套API即可</li>
<li>目前很多的网站依然采用这种模式开发</li>
</ul>
<p>单页面应用阶段：</p>
<ul>
<li>其实SPA最主要的特点就是在前后端分离的基础上加了一层前端路由</li>
<li>也就是前端来维护一套路由规则</li>
</ul>
<p>前端路由的核心是什么呢？</p>
<ul>
<li>改变URL，但是页面不进行整体的刷新</li>
</ul>
</blockquote>
<h2 id="四、前端路由规则-了解"><a href="#四、前端路由规则-了解" class="headerlink" title="四、前端路由规则(了解)"></a>四、前端路由规则(了解)</h2><h3 id="1、URL的hash"><a href="#1、URL的hash" class="headerlink" title="1、URL的hash"></a>1、URL的hash</h3><blockquote>
<p>URL的hash也就是锚点(#), 本质上是改变window.location的href属性</p>
<p>我们可以通过直接赋值location.hash来改变href, 但是页面不发生刷新</p>
</blockquote>
<p><img src="/2022/07/16/vue2-jin-jie/1652961810554.png" alt="1652961810554"></p>
<h3 id="2、HTML5的history模式"><a href="#2、HTML5的history模式" class="headerlink" title="2、HTML5的history模式"></a>2、HTML5的history模式</h3><blockquote>
<p>history接口时HTML5新增的，它有5种模式改变URL而不刷新页面</p>
</blockquote>
<p><strong>history.pushState(data, title, url)</strong></p>
<p><img src="/2022/07/16/vue2-jin-jie/1652961866265.png" alt="1652961866265"></p>
<p><strong>history.replaceState(data, title, url)</strong></p>
<p><img src="/2022/07/16/vue2-jin-jie/1652961873543.png" alt="1652961873543"></p>
<p>**history.go(-1) **返回上一页</p>
<p><strong>history.back()</strong> 等价于 history.go(-1)</p>
<p><strong>history.forward()</strong> 等价于 history.go(1)</p>
<h2 id="五、-重点-Vue-router基本使用"><a href="#五、-重点-Vue-router基本使用" class="headerlink" title="五、(重点)Vue-router基本使用"></a>五、(重点)Vue-router基本使用</h2><blockquote>
<p>目前前端流行的三大框架，都有自己的路由实现：</p>
<ul>
<li>Angular的ngRouter</li>
<li>React的ReactRouter</li>
<li>Vue的vue-router</li>
</ul>
</blockquote>
<h3 id="1、认识vue-router"><a href="#1、认识vue-router" class="headerlink" title="1、认识vue-router"></a>1、认识vue-router</h3><p>vue-router是Vue的官方路由插件，它和Vue是深度集成的，适合用于构建单页面应用  <a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/">https://router.vuejs.org/zh/</a> 。</p>
<p>vue-router是基于路由和组件的,路由用于设定访问路径, 将路径和组件映射起来；在vue-router的单页面应用中, 页面的路径的改变就是组件的切换.</p>
<h3 id="2、安装router"><a href="#2、安装router" class="headerlink" title="2、安装router"></a>2、安装router</h3><p>一般项目中建议在cli创建项目时就直接选择需要路由，并搭配history模式。如果并未选择，那么安装教程请参照官网：</p>
<p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/installation.html">https://router.vuejs.org/zh/installation.html</a></p>
<h3 id="3、路由使用"><a href="#3、路由使用" class="headerlink" title="3、路由使用"></a>3、路由使用</h3><p>在src下的views中，创建 <code>Home.vue</code> 及 <code>User.vue</code> ，随意写入一些信息。找到 <code>router/index.js</code> 中：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'@/views/Home.vue'</span>

<span class="token keyword">const</span> <span class="token function-variable function">User</span> <span class="token operator">=</span> <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'@/views/User.vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@/views/User.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>  <span class="token comment">// 导入路由对象</span>

<span class="token comment">// 定义路由规则</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Home
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
    <span class="token comment">// component: () =&gt; import(/* webpackChunkName: "user" */ '../views/User.vue')</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> User
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment">// 创建路由实例</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>  <span class="token comment">// vue路由只有两种模式，一种是hash，一种是history，这里使用历史模式</span>
  <span class="token literal-property property">base</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">,</span>
  route
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router</code></pre>

<p>可以看到，我们有两种引入组件的方式。第一种比较能理解，第二种我们称之为“路由懒加载”。而这个懒加载中，有个 <code>webpackChunkName</code>，这东西我们称为魔法注释。</p>
<blockquote>
<p>魔法注释的作用：</p>
<p>webpack在打包的时候，对异步引入的库代码（lodash）进行代码分割时，为分割后的代码块取得名字。</p>
<p>Vue中运用import的懒加载语句以及webpack的魔法注释，在项目进行webpack打包的时候，对不同模块进行代码分割，在首屏加载时，用到哪个模块再加载哪个模块，实现懒加载进行页面的优化。</p>
<p>当你 <code>npm run build</code> 之后，生成的js文件中，就能看到以魔法注释定义的js文件名。</p>
</blockquote>
<h3 id="4、懒加载"><a href="#4、懒加载" class="headerlink" title="4、懒加载"></a>4、懒加载</h3><p>当一个vue项目很大的时候,对于一些“暂时”用不到的组件,我们可以不进行加载,等到用到次组件时再加载。这样可以优化spa应用首次加载白屏情况,也给用户更好的体验。这就是vue路由懒加载。</p>
<p>懒加载的方式</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// 方式一: 结合Vue的异步组件和Webpack的代码分析</span>
<span class="token keyword">const</span> <span class="token function-variable function">User</span> <span class="token operator">=</span> <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'@/views/User.vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@/views/User.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 方式二: AMD写法</span>
<span class="token keyword">const</span> <span class="token function-variable function">User</span> <span class="token operator">=</span> <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'@/views/User.vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 方式三: 在ES6中, 我们可以有更加简单的写法来组织Vue异步组件和Webpack的代码分割.</span>
<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "user" */</span> <span class="token string">'../views/User.vue'</span><span class="token punctuation">)</span></code></pre>

<h3 id="5、路由模式"><a href="#5、路由模式" class="headerlink" title="5、路由模式"></a>5、路由模式</h3><p>vue中的路由默认时hash模式，使用 URL 的 hash 来模拟一个完整的 URL，于是当 URL 改变时，页面不会重新加载。如果不想要很丑的 hash，我们可以用路由的history 模式，这种模式充分利用 <code>history.pushState</code> API 来完成 URL 跳转而无须重新加载页面。</p>
<blockquote>
<p>hash 虽然出现URL中，但不会被包含在HTTP请求中，对后端完全没有影响，因此改变hash不会重新加载页面。</p>
<p>history模式提供了对历史记录进行修改的功能，只是当它们执行修改时，虽然改变了当前的URL，但你浏览器不会立即向后端发送请求。history模式，会出现404 的情况，需要后台配置。</p>
<p>404 错误：</p>
<p>1、hash模式下，仅hash符号之前的内容会被包含在请求中，如 <a target="_blank" rel="noopener" href="http://www.xxx.com/">http://www.xxx.com</a>, 因此对于后端来说，即使没有做到对路由的全覆盖，也不会返回404错误；</p>
<p>2、history模式下，前端的url必须和实际向后端发起请求的url 一致，如<a target="_blank" rel="noopener" href="http://www.xxx.com/book/id">http://www.xxx.com/book/id</a> 。如果后端缺少对/book/id 的路由处理，将返回404错误。</p>
</blockquote>
<h3 id="6、路由跳转方式"><a href="#6、路由跳转方式" class="headerlink" title="6、路由跳转方式"></a>6、路由跳转方式</h3><p>我们可以使用 <code>router-link</code> 标签来实现跳转，如：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;div id="nav"&gt;
  &lt;router-link to="/"&gt;Home&lt;/router-link&gt; |
  &lt;router-link to="/user"&gt;User&lt;/router-link&gt;
&lt;/div&gt;
&lt;router-view/&gt;</code></pre>

<p>然后通过 <code>router-view</code> 来显示页面。<code>router-link</code> 最终会被渲染为a标签。</p>
<p><code>router-link</code> 默认会被解析为a标签，如果想让它转换成其他的标签，就需要添加tag属性：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;router-link tag="li" to="/user"&gt;User&lt;/router-link&gt;</code></pre>

<p>此时，<code>router-link</code> 就被解析为li标签。</p>
<h3 id="7、编程式导航"><a href="#7、编程式导航" class="headerlink" title="7、编程式导航"></a>7、编程式导航</h3><p>我们还有别的方式：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// 简写</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">)</span>

<span class="token comment">// 完整的写法</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user'</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<p>我们除了push，还有go、forward、back这几个来触发不同情况的跳转。</p>
<h3 id="8、路由命名"><a href="#8、路由命名" class="headerlink" title="8、路由命名"></a>8、路由命名</h3><p>当我们给路由命名后：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user/:userId'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>			<span class="token comment">// 对路由进行命名</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "user" */</span> <span class="token string">'../views/User.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<p>携带参数：</p>
<pre class="language-jsx" data-language="jsx"><code class="language-jsx">router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<p>而在User组件中，可以通过 <code>$route.params.userId</code> 获取到参数：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;div&gt;
  用户页{{$route.params.userId}}
&lt;/div&gt;</code></pre>

<h3 id="9、query传参"><a href="#9、query传参" class="headerlink" title="9、query传参"></a>9、query传参</h3><p>使用params传参，得到的结果与使用query传参得到的结果有以下区别：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token comment">// http://localhost:8081/user/123</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span> <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>       <span class="token comment">// http://localhost:8081/?userId=123</span></code></pre>

<h4 id="重调强调："><a href="#重调强调：" class="headerlink" title="* 重调强调："></a>* 重调强调：</h4><p><font color="red">编程式导航中，使用name进行路径跳转，携带参数可以通过params和query，其中query会将参数携带在导航路径上，而使用path进行路径跳转，无法携带params，只能携带query。</font></p>
<h4 id="补充："><a href="#补充：" class="headerlink" title="补充："></a><strong>补充：</strong></h4><p>params参数传参写法相当于在路径直接添加：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">//App.vue中：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/user/12'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// router/index.js中：</span>
<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user/:userId'</span><span class="token punctuation">,</span>
    
<span class="token comment">// User.vue中：</span>
<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 获取到用户id12</span>
<span class="token punctuation">}</span></code></pre>

<p><strong>this.$router.replace()   重定向跳转</strong></p>
<p><strong>next() 本身就是一个重定向跳转</strong></p>
<h4 id="this-route-query和this-route-params的使用与区别"><a href="#this-route-query和this-route-params的使用与区别" class="headerlink" title="this.$route.query和this.$route.params的使用与区别"></a>this.$route.query和this.$route.params的使用与区别</h4><p><strong>一、this.$route.query的使用</strong></p>
<p><strong>1.传参数</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
         <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/trading'</span><span class="token punctuation">,</span>
         <span class="token literal-property property">query</span><span class="token operator">:</span><span class="token punctuation">{</span>
               <span class="token literal-property property">id</span><span class="token operator">:</span>id<span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
<span class="token punctuation">}</span>）

<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/trading?name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>data<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre>

<p><strong>2.获取参数（ *<em>query相对应的是path*</em> params相对应的是name ）</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id</code></pre>

<p> **3.url的表现形式（*<em>url中带有参数*<em>）</em></em></p>
<p><code>  http://localhost:8090/#/trading?id=1</code></p>
<p><em><strong>*PS: 页面之间用路由跳转传参时，刷新跳转后传参的页面，数据还会显示存在*</strong></em></p>
<p><strong>二、this.$route.params的使用</strong></p>
<p><strong>1.传参数</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
         <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'trading'</span><span class="token punctuation">,</span>
         <span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span>
               <span class="token literal-property property">id</span><span class="token operator">:</span>id<span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
<span class="token punctuation">}</span>）</code></pre>

<p><strong>2.获取参数</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id</code></pre>

<p> **3.url的表现形式（*<em>url中不带参数*<em>）</em></em></p>
<p>　<code>http://localhost:8090/#/trading</code></p>
<p><strong>PS: *<em>页面之间用路由跳转传参时，刷新跳转后传参的页面，数据不存在*</em></strong></p>
<h3 id="10、路由重定向"><a href="#10、路由重定向" class="headerlink" title="10、路由重定向"></a>10、路由重定向</h3><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/home'</span>		<span class="token comment">// 这就是路由的重定向，重新定义跳转路径</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>    <span class="token comment">// 改成这个之后，原来的/就没有对用的组件了</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Home.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
  <span class="token operator">...</span>  <span class="token operator">...</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span>		<span class="token comment">// 匹配所有剩余的路由，只要不是上面提及的页面，全部跳转到404页面</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Page404.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre>

<h3 id="11、底部Tab栏-初步布局"><a href="#11、底部Tab栏-初步布局" class="headerlink" title="11、底部Tab栏-初步布局"></a>11、底部Tab栏-初步布局</h3><p>App.vue:</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;div id="app"&gt;
    &lt;router-view/&gt;
&lt;/div&gt;

&lt;style lang="less"&gt;
*{ margin: 0; padding: 0;list-style: none;}
body,#app,html{ width: 100%; height: 100%;}
body{
  background-color: #eee;
}
&lt;/style&gt;
</code></pre>

<p><code>Home.vue</code> ：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class="home"&gt;
      &lt;router-view&gt;&lt;/router-view&gt;
      &lt;ul class="tit"&gt;
        &lt;li&gt;分类&lt;/li&gt;
        &lt;li&gt;用户&lt;/li&gt;
        &lt;li&gt;详情&lt;/li&gt;
      &lt;/ul&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style lang="less" scoped&gt;
.tit{
  background-color: #fff;
  display: flex;
  text-align: center;
  position: fixed;
  bottom:0;
  width: 100%;
}
.tit li{
  flex:1;
  height: 50px;
  line-height: 50px;
}
&lt;/style&gt;</code></pre>

<h3 id="12、底部Tab栏-嵌套路由"><a href="#12、底部Tab栏-嵌套路由" class="headerlink" title="12、底部Tab栏-嵌套路由"></a>12、底部Tab栏-嵌套路由</h3><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">"/home"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Home<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home/category'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Category.vue'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home/user'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/User.vue'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home/detail'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Detail.vue'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span> <span class="token operator">...</span>
<span class="token punctuation">]</span></code></pre>

<p>最后 访问：    </p>
<p><a target="_blank" rel="noopener" href="http://localhost:8081/home/category">http://localhost:8081/home/category</a>    可以看到分类页面</p>
<h3 id="13、底部Tab栏-点击跳转的实现"><a href="#13、底部Tab栏-点击跳转的实现" class="headerlink" title="13、底部Tab栏-点击跳转的实现"></a>13、底部Tab栏-点击跳转的实现</h3><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>li<span class="token punctuation">"</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/home/category<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>分类<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>li<span class="token punctuation">"</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/home/user<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>用户<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>li<span class="token punctuation">"</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/home/detail<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>详情<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- &lt;li&gt;分类&lt;/li&gt;
&lt;li&gt;用户&lt;/li&gt;
&lt;li&gt;详情&lt;/li&gt; --&gt;</span></code></pre>

<h3 id="14、meta属性"><a href="#14、meta属性" class="headerlink" title="14、meta属性"></a>14、meta属性</h3><p>这是写在路由文件中的字段，我们去 <code>router/index.js</code> 中，将我们要缓存的 <code>Me.vue</code> 页面加上meta：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'../views/Home.vue'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  	<span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/me'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Me'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Me.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">keepAlive</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/you'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'You'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/You.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">base</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">,</span>
  routes
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router</code></pre>

<h3 id="15、（重点）KeepAlive"><a href="#15、（重点）KeepAlive" class="headerlink" title="15、（重点）KeepAlive"></a>15、（重点）KeepAlive</h3><p><code>&lt;keep-alive&gt;</code>是Vue的内置组件，能在组件切换过程中将状态保留在内存中，防止重复渲染DOM。</p>
<p>KeepAlive用于处理组件缓存。有什么用呢？想象一个业务场景：</p>
<blockquote>
<p>在Login页面填写完手机号，发现未注册，需要跳去Register页面完成注册，再返回Login页面填写密码，进行登录，此时如果在Login页面没有保存好手机号，那么跳回来时，用户又得重新输入手机号。为了解决这样的需求，我们需要借助keep-alive。</p>
</blockquote>
<p>这里，我们新创建两个页面， <code>You.vue</code> 和 <code>Me.vue</code> ，并且都实现累加功能。</p>
<p>1、修改App.vue</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">// 将原本的：
&lt;router-view/&gt;

// 修改为： 
&lt;keep-alive&gt;
  &lt;router-view/&gt;
&lt;/keep-alive&gt;</code></pre>

<p>这样，我们实现了整个项目中每个页面的缓存，显然我们不想这么做，我们只想针对某些页面，这时，我们修改一下：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;keep-alive&gt;
	&lt;router-view v-if="$route.meta.keepAlive" /&gt;
&lt;/keep-alive&gt;
&lt;router-view v-if="!$route.meta.keepAlive" /&gt;</code></pre>

<blockquote>
<p>注意：</p>
<p><code>&lt;keep-alive&gt;</code> 是用在其一个直属的子组件被开关的情形。如果你在其中有 <code>v-for</code> 则不会工作。</p>
</blockquote>
<h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><p><img src="/2022/07/16/vue2-jin-jie/Vue-day09-Vuex.png" alt="Vue-day09-Vuex"></p>
<h3 id="1、官方定义："><a href="#1、官方定义：" class="headerlink" title="1、官方定义："></a>1、官方定义：</h3><blockquote>
<p>Vuex 是一个专为 Vue.js 应用程序开发的<strong>状态管理模式</strong>。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</p>
</blockquote>
<p>说得直白点，vuex就是vue.js中管理数据状态的一个库，通过创建一个集中的数据存储，供程序中所有组件访问。 </p>
<p><img src="/2022/07/16/vue2-jin-jie/1653207777555.png" alt="1653207777555"></p>
<p>一个数据只要放在了vuex中，当前项目所有的组件都可以直接访问这个数据。</p>
<h4 id="Vuex的作用"><a href="#Vuex的作用" class="headerlink" title="Vuex的作用"></a>Vuex的作用</h4><ul>
<li>能够在vuex中集中管理共享数据，易于开发和后期维护</li>
<li>能够高校地实现组件之间的数据共享，提高开发效率</li>
<li>存储在vuex中的数据都是响应式的，能够实时保持数据与页面的同步</li>
</ul>
<blockquote>
<p>当组件之间需要共享数据时，就可以存储到vuex中。 组件私有数据存储到自身的data中即可。</p>
</blockquote>
<p><img src="/2022/07/16/vue2-jin-jie/1653198798433.png" alt="1653198798433"></p>
<p>vuex有以下常用的几个核心属性概念：</p>
<ul>
<li>State</li>
<li>Getters</li>
<li>Mutations</li>
<li>Actions</li>
<li>Modules</li>
</ul>
<p>具体用法我们稍后揭晓。</p>
<h3 id="2、实际场景"><a href="#2、实际场景" class="headerlink" title="2、实际场景"></a>2、实际场景</h3><p>普通的父传子和子传父，或是兄弟组件之间的互传值，都是两个组件之间的数据连接，但如果数据需要多组件共享，并且数据量庞大，那么就不适宜用中央事件总线来解决。此时，我们需要一个更加强大的，能够维护庞大数据的东西，它就是vuex，我们称之为：状态管理。</p>
<h3 id="3、什么时候用Vuex"><a href="#3、什么时候用Vuex" class="headerlink" title="3、什么时候用Vuex?"></a>3、什么时候用Vuex?</h3><p>是不是学了就必须要在项目中使用呢？来看官网的回答：</p>
<p>Vuex 可以帮助我们管理共享状态，并附带了更多的概念和框架。这需要对短期和长期效益进行权衡。</p>
<p>如果您不打算开发大型单页应用，使用 Vuex 可能是繁琐冗余的。确实是如此——如果您的应用够简单，您最好不要使用 Vuex。一个简单的 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/state-management.html#%E7%AE%80%E5%8D%95%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E8%B5%B7%E6%AD%A5%E4%BD%BF%E7%94%A8">store 模式</a>就足够您所需了。但是，如果您需要构建一个中大型单页应用，您很可能会考虑如何更好地在组件外部管理状态，Vuex 将会成为自然而然的选择。引用 Redux 的作者 Dan Abramov 的话说就是：</p>
<blockquote>
<p>Flux 架构就像眼镜：您自会知道什么时候需要它。</p>
</blockquote>
<p>很显然，如果你的项目比较简单，建议还是别强行使用vuex了。</p>
<p>另外，值得注意的点：<font color="red">vuex会随着页面刷新或关闭，将所有数据恢复至最初始的状态，所以它并不能替代localStorage。</font></p>
<h3 id="4、安装Vuex"><a href="#4、安装Vuex" class="headerlink" title="4、安装Vuex"></a>4、安装Vuex</h3><p>如果你的项目是较为大型的，那么建议在创建项目时直接选择安装vuex，如果创建时并未选择安装，请参考：《<a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/installation.html">官网vuex安装</a>》。</p>
<h3 id="5、State"><a href="#5、State" class="headerlink" title="5、State"></a>5、State</h3><p>vuex中的state类似于data，用于存放数据，只不过这个数据是所有组件公用的。</p>
<p>我们来实现一个计数功能，但咱们把数据存放到vuex中的state，这里是专门用来存放组件共享的数据的。来看一下怎么实现：</p>
<p>首先，在 <code>store/index.js</code> 中：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">0</span>	<span class="token comment">// 定义了一个num</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<p>然后在组件中：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div&gt;
    &lt;h3&gt;{{$store.state.num}}&lt;/h3&gt;
 &lt;/div&gt;
&lt;/template&gt;</code></pre>

<p>如此这般，我们获取到了state中的数据：</p>
<p><img src="/2022/07/16/vue2-jin-jie/1653199006334.png" alt="1653199006334"></p>
<p>但在html中写这么长一串，始终有点难以阅读，因此，可以在computed中获取这个值，再传入html中：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>num
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 标签中</span>
<span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span></code></pre>

<p>那么能否在data中存储这个数据呢？比如这样：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>num
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre>

<p>答案是可以的，但不太建议。因为data中的数据可以修改，但通常唯一能够修改state的方式是通过vuex中的mutations，所以此处我们了解一下即可。</p>
<h3 id="6、Getters"><a href="#6、Getters" class="headerlink" title="6、Getters"></a>6、Getters</h3><p>vuex中的getters类似于computed计算属性，getters的返回值会根据它的依赖被缓存起来，且只有当它的依赖值发生了改变才会被重新计算。</p>
<p><code>store/index.js</code> 中：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里的参数state可以让我们快速获取到仓库中的数据</span>
    <span class="token function">doubleNum</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<p>组件中：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div&gt;
    &lt;h3&gt;{{num}}&lt;/h3&gt;
 &lt;/div&gt;
&lt;/template&gt;
 
&lt;script&gt;
export default {
  computed: {
    num(){
      return this.$store.getters.doubleNum
    }
  }
};
&lt;/script&gt;</code></pre>

<h3 id="7、Mutations"><a href="#7、Mutations" class="headerlink" title="7、Mutations"></a>7、Mutations</h3><p>官网指出：</p>
<blockquote>
<p>更改 Vuex 的 store 中的状态的唯一方法是提交 mutation。</p>
</blockquote>
<p>OK！那我们来修改一下这个num：</p>
<p><code>store/index.js</code> 中（这里暂时先把getters去掉，避免大家学习混乱）：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// payload专业名称为“载荷”，其实就是个参数</span>
    <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>num <span class="token operator">+=</span> payload<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<p>组件中：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div&gt;
    &lt;h3&gt;{{num}}&lt;/h3&gt;
    &lt;button @click="btnClick"&gt;累加2&lt;/button&gt;
 &lt;/div&gt;
&lt;/template&gt;
 
&lt;script&gt;
export default {
  computed: {
    num(){
      return this.$store.state.num
    }
  },
  methods: {
    btnClick(){
      // 使用commit来触发事件，第二个参数是要传递给payload的数据
      this.$store.commit('addNum', 2)
    }
  }
};
&lt;/script&gt;</code></pre>

<p>来看看效果：</p>
<img src="/2022/07/16/vue2-jin-jie/07.gif" style="border: 2px solid">

<p>有一个必须注意的点，Mutations中不允许出现异步操作，它必须是一个同步函数，来看官网的解释：</p>
<p><img src="/2022/07/16/vue2-jin-jie/1653199185524.png" alt="1653199185524"></p>
<p>我们来亲自尝试一下：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里给mutations添加定时器，也相当于是异步操作</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
      state<span class="token punctuation">.</span>num <span class="token operator">+=</span> payload<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre>

<p>来看看效果：</p>
<img src="/2022/07/16/vue2-jin-jie/09.gif" style="zoom: 1.2;border: 2px solid">

<h3 id="8、Actions"><a href="#8、Actions" class="headerlink" title="8、Actions"></a>8、Actions</h3><p>Action 类似于 mutation，不同在于：</p>
<ul>
<li>Action 提交的是 mutation，而不是直接变更状态。</li>
<li>Action 可以包含任意异步操作。</li>
</ul>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>num <span class="token operator">+=</span> payload<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// context是一个对象，包含了commit和state</span>
    <span class="token function">AsyncAddNum</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'addNum'</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<p>组件中：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div&gt;
    &lt;h3&gt;{{num}}&lt;/h3&gt;
    &lt;button @click="btnClick"&gt;累加2&lt;/button&gt;
 &lt;/div&gt;
&lt;/template&gt;
 
&lt;script&gt;
export default {
  computed: {
    num(){
      return this.$store.state.num
    }
  },
  methods: {
    btnClick(){
      // dispatch是分发到意思，其实也是触发Actions中的方法
      this.$store.dispatch('AsyncAddNum', 2)
    }
  }
};
&lt;/script&gt;</code></pre>

<p>当然，上面actions中的写法有点累赘，我们还可以改写：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token function">AsyncAddNum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span>payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'addNum'</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 如果你还想获取state中的值，可以这样：</span>
<span class="token function">AsyncAddNum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit<span class="token punctuation">,</span>state <span class="token punctuation">}</span><span class="token punctuation">,</span>payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 2</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'addNum'</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>

<p>那么，既然actions中可以拿到state的值，能否直接改这个值，而不触发mutations呢？答案是可以的，但…还是devtool的问题：</p>
<img src="/2022/07/16/vue2-jin-jie/10.gif" style="border: 2px solid;zoom: 1.2">

<h3 id="9、辅助函数"><a href="#9、辅助函数" class="headerlink" title="9、辅助函数"></a>9、辅助函数</h3><p>获取单个数据或触发某个方法比较容易，我们直接拿到和触发就行，但如果要获取的数据和触发的方法很多个，我们就比较麻烦了，这时候我们需要借用辅助函数。比如，我们刚刚只写了累加，现在再补充一个递减。然后来看看辅助函数怎么用。</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'标题'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">doubleNum</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>num <span class="token operator">+=</span> payload<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">cutNum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>num <span class="token operator">-=</span> payload<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">AsyncAddNum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span>payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'addNum'</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">AsyncCutNum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'cutNum'</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<p>此时，要拿到num和title的话，我们可以在组件中：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div&gt;
    &lt;h2&gt;{{title}}&lt;/h2&gt;
    &lt;h3&gt;{{num}}&lt;/h3&gt;
 &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// 引入辅助函数mapState
import {mapState} from 'vuex'
export default {
  // 在computed中引用
  computed: {
    ...mapState(['title', 'num'])
  }
};
&lt;/script&gt;</code></pre>

<p>如果打算从getters中取出num：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;h3&gt;{{doubleNum}}&lt;/h3&gt;

&lt;script&gt;
import {mapState, mapGetters} from 'vuex'
export default {
  computed: {
    ...mapState(['title']),
    ...mapGetters(['doubleNum'])
  }
};
&lt;/script&gt;</code></pre>

<p>如果打算把mutations和actions中的方法引入：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div&gt;
    &lt;h2&gt;{{title}}&lt;/h2&gt;
    &lt;h3&gt;{{doubleNum}}&lt;/h3&gt;
    &lt;button @click="addNum(2)"&gt;累加2&lt;/button&gt;
    &lt;button @click="AsyncCutNum(2)"&gt;递减2&lt;/button&gt;
 &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import {mapState, mapGetters, mapMutations, mapActions} from 'vuex'
methods: {
  	// 这里负责引入，我们把引入后的事件直接写在标签上，顺便把参数也带上
    ...mapMutations(['addNum']),
    ...mapActions(['AsyncCutNum'])
}
&lt;/script&gt;</code></pre>

<p>如果你必须把点击事件写在methods中，而不是标签上的话，你也可以这样：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div&gt;
    &lt;button @click="btnClick1"&gt;累加2&lt;/button&gt;
    &lt;button @click="btnClick2"&gt;递减2&lt;/button&gt;
 &lt;/div&gt;
&lt;/template&gt;
 
&lt;script&gt;
import {mapState, mapGetters, mapMutations, mapActions} from 'vuex'
export default {
  methods: {
    ...mapMutations(['addNum']),
    ...mapActions(['AsyncCutNum']),
    btnClick1(){
      // 直接通过this.xxx来调用辅助函数引入的事件
      this.addNum(2)
    },
    btnClick2(){
      this.AsyncCutNum(2)
    }
  }
};
&lt;/script&gt;</code></pre>

<h3 id="10、Module"><a href="#10、Module" class="headerlink" title="10、Module"></a>10、Module</h3><p>假设我们把累加单独抽出来作为一个模块，在store下新建一个 <code>add/index.js</code> 文件：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">namespaced</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>	<span class="token comment">//	命名空间，为true时，可以在store中把当前模块文件夹名称（add），当作模块名使用</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">doubleNum</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> state<span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>num <span class="token operator">+=</span> payload<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">AsyncAddNum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'addNum'</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>

<p>把有关累加的所有内容，都移动至本文件。再到原来仓库index.js中的modules添加：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> add <span class="token keyword">from</span> <span class="token string">'./add'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
	<span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    add
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<p>在组件中使用时，稍微有些变化：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string-property property">'title'</span><span class="token operator">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'num1'</span><span class="token operator">:</span> <span class="token string">'num1'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'num'</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>add<span class="token punctuation">.</span>num		<span class="token comment">// module中state值的获取方法和getters等不太一样，需要写函数形式</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

<span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string-property property">'doubleNum'</span><span class="token operator">:</span> <span class="token string">'add/doubleNum'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string-property property">'addNum'</span><span class="token operator">:</span> <span class="token string">'add/addNum'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

<h3 id="11、拆分写法"><a href="#11、拆分写法" class="headerlink" title="11、拆分写法"></a>11、拆分写法</h3><p>实际上我们可以把state、getter、mutation、action和module都抽离出来，这样可以让store文件看着更加简洁。我们来将 <code>store/index.js</code> 进行拆分：</p>
<p><code>state.js</code>：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num1</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'标题'</span>
<span class="token punctuation">}</span></code></pre>

<p><code>mutations.js</code>：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">cutNum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>num1 <span class="token operator">-=</span> payload<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>

<p><code>actions.js</code>：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">AsyncCutNum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'cutNum'</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>

<p><code>modules.js</code>：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> add <span class="token keyword">from</span> <span class="token string">'./add'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    add
<span class="token punctuation">}</span></code></pre>

<p>最后，在 <code>store/index.js</code> 中：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> state <span class="token keyword">from</span> <span class="token string">'./state'</span>
<span class="token keyword">import</span> mutations <span class="token keyword">from</span> <span class="token string">'./mutations'</span>
<span class="token keyword">import</span> actions <span class="token keyword">from</span> <span class="token string">'./actions'</span>
<span class="token keyword">import</span> modules <span class="token keyword">from</span> <span class="token string">'./modules'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token punctuation">,</span>
  mutations<span class="token punctuation">,</span>
  actions<span class="token punctuation">,</span>
  modules
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>


                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Evedward</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://hellozhj.github.io/2022/07/16/vue2-jin-jie/">https://hellozhj.github.io/2022/07/16/vue2-jin-jie/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Evedward</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/vue/">
                                    <span class="chip bg-color">vue</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/07/19/vue2-an-li/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/20.jpg" class="responsive-img" alt="vue2-案例">
                        
                        <span class="card-title">vue2-案例</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-07-19
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Evedward
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/vue/">
                        <span class="chip bg-color">vue</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/07/16/vue2-ji-chu/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/15.jpg" class="responsive-img" alt="vue2-基础">
                        
                        <span class="card-title">vue2-基础</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-07-16
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Evedward
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/vue/">
                        <span class="chip bg-color">vue</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2022</span>
            
            <a href="/about" target="_blank">Evedward</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">200.4k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/hellozhj" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:wymail@126.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2325910627" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2325910627" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
